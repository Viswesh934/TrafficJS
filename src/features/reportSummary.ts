// moved from src/reportSummary.ts
export interface SystemStats {
  cpu: string | number;
  memoryUsedGB: string | number;
  memoryTotalGB: string | number;
  diskUsedGB: string | number;
  diskTotalGB: string | number;
  netRxMBps: string | number;
  netTxMBps: string | number;
}

export function generateSummary(stats: SystemStats, loadScore: string): string {
  const loadNum = parseFloat(loadScore);
  const memoryPercent = ((parseFloat(stats.memoryUsedGB as string) / parseFloat(stats.memoryTotalGB as string)) * 100).toFixed(1);
  const diskPercent = ((parseFloat(stats.diskUsedGB as string) / parseFloat(stats.diskTotalGB as string)) * 100).toFixed(1);
  
  let healthStatus = "";
  let healthEmoji = "";
  
  if (loadNum > 80) {
    healthStatus = "**Critical ğŸ”¥**";
    healthEmoji = "ğŸš¨";
  } else if (loadNum > 65) {
    healthStatus = "**High Load âš¡**";
    healthEmoji = "âš ï¸";
  } else if (loadNum > 40) {
    healthStatus = "**Moderate Load âš™ï¸**";
    healthEmoji = "ğŸ“Š";
  } else {
    healthStatus = "**Healthy âœ…**";
    healthEmoji = "ğŸ’š";
  }

  return `# ${healthEmoji} System Health Report

**Generated:** ${new Date().toLocaleString()}  
**Load Score:** **${loadScore}%** - ${healthStatus}

## ğŸ“Š Current Metrics

| Component | Usage | Status |
|-----------|-------|--------|
| **CPU** | ${stats.cpu}% | ${parseFloat(stats.cpu as string) > 80 ? 'ğŸ”´ High' : parseFloat(stats.cpu as string) > 50 ? 'ğŸŸ¡ Moderate' : 'ğŸŸ¢ Normal'} |
| **Memory** | ${stats.memoryUsedGB}/${stats.memoryTotalGB} GB (${memoryPercent}%) | ${parseFloat(memoryPercent) > 85 ? 'ğŸ”´ High' : parseFloat(memoryPercent) > 70 ? 'ğŸŸ¡ Moderate' : 'ğŸŸ¢ Normal'} |
| **Disk** | ${stats.diskUsedGB}/${stats.diskTotalGB} GB (${diskPercent}%) | ${parseFloat(diskPercent) > 90 ? 'ğŸ”´ Full' : parseFloat(diskPercent) > 75 ? 'ğŸŸ¡ Getting Full' : 'ğŸŸ¢ Available'} |
| **Network** | â†“${stats.netRxMBps} / â†‘${stats.netTxMBps} MBps | ${parseFloat(stats.netRxMBps as string) + parseFloat(stats.netTxMBps as string) > 10 ? 'ğŸ”´ High' : 'ğŸŸ¢ Normal'} |

## ğŸ¯ System Analysis

${loadNum > 80 ? 
  "âš ï¸ **Action Required:** System is under heavy load. Consider scaling resources or optimizing workloads." : 
  loadNum > 65 ? 
  "ğŸ“Š **Monitor Closely:** System load is elevated. Watch for resource bottlenecks." : 
  loadNum > 40 ? 
  "âœ… **Normal Operation:** System performing within acceptable parameters." : 
  "ğŸ’š **Excellent:** System running optimally with plenty of headroom."
}

---
*Report generated by TrafficJS Real-time Monitor*
`;
}

export function generateShortSummary(stats: SystemStats, loadScore: string): string {
  return `ğŸ§  Load: ${loadScore}% | ğŸ–¥ï¸ CPU: ${stats.cpu}% | ğŸ’¾ Mem: ${stats.memoryUsedGB}GB | ğŸŒ Net: ${stats.netRxMBps}/${stats.netTxMBps} MBps`;
}